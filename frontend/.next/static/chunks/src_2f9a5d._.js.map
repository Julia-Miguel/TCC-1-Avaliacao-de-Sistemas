{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Nova%20pasta/TCC-1-Avaliacao-de-Sistemas/frontend/src/services/api.ts"],"sourcesContent":["// frontend/src/services/api.ts\r\nimport axios from \"axios\";\r\n\r\nconst api = axios.create({\r\n  baseURL: \"http://localhost:4444\",\r\n});\r\n\r\n// --- NOVO: Interceptor para adicionar o token JWT ---\r\napi.interceptors.request.use(\r\n  async (config) => {\r\n    // Verifica se estamos no ambiente do navegador antes de tentar acessar o localStorage\r\n    if (typeof window !== \"undefined\") {\r\n      const token = localStorage.getItem('adminToken');\r\n      if (token) {\r\n        config.headers.Authorization = `Bearer ${token}`;\r\n      }\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(new Error(error?.message ?? String(error)));\r\n  }\r\n);\r\n// --------------------------------------------------\r\n\r\nexport default api;"],"names":[],"mappings":"AAAA,+BAA+B;;;;AAC/B;;AAEA,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACvB,SAAS;AACX;AAEA,uDAAuD;AACvD,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAC1B,OAAO;IACL,sFAAsF;IACtF,wCAAmC;QACjC,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI,OAAO;YACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;QAClD;IACF;IACA,OAAO;AACT,GACA,CAAC;IACC,OAAO,QAAQ,MAAM,CAAC,IAAI,MAAM,OAAO,WAAW,OAAO;AAC3D;uCAIa"}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Nova%20pasta/TCC-1-Avaliacao-de-Sistemas/frontend/src/components/auth/AdminAuthGuard.tsx"],"sourcesContent":["// frontend/src/components/auth/AdminAuthGuard.tsx\r\n'use client';\r\nimport { useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useAuth } from '@/contexts/AuthContext'; // Ajuste o caminho se o AuthContext estiver em outro lugar\r\n\r\nexport default function AdminAuthGuard({ children }: Readonly<{ children: React.ReactNode }>) {\r\n  const { loggedInAdmin, isLoadingAuth } = useAuth();\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    // Não faz nada enquanto o estado de autenticação ainda está carregando do localStorage\r\n    if (isLoadingAuth) {\r\n      return;\r\n    }\r\n\r\n    // Se não estiver logado E o carregamento inicial do auth já terminou, redireciona\r\n    if (!loggedInAdmin && !isLoadingAuth) {\r\n      router.push('/empresas/login'); // Ou para /admin/login se preferir um ponto de entrada único\r\n    }\r\n  }, [loggedInAdmin, isLoadingAuth, router]);\r\n\r\n  // Se ainda estiver carregando o estado de autenticação ou se não estiver logado (e o redirecionamento vai acontecer),\r\n  // pode mostrar um loader ou nada para evitar flash de conteúdo.\r\n  if (isLoadingAuth || !loggedInAdmin) {\r\n    return <div className=\"page-container center-content\"><p>Verificando autorização...</p></div>;\r\n    // Ou return null; para não mostrar nada até o redirecionamento ocorrer.\r\n  }\r\n\r\n  // Se estiver logado, renderiza a página protegida\r\n  return <>{children}</>;\r\n}"],"names":[],"mappings":"AAAA,kDAAkD;;;;;AAElD;AACA;AACA,mOAAkD,2DAA2D;;;AAH7G;;;;AAKe,SAAS,eAAe,EAAE,QAAQ,EAA2C;;IAC1F,MAAM,EAAE,aAAa,EAAE,aAAa,EAAE,GAAG,CAAA,GAAA,kIAAA,CAAA,UAAO,AAAD;IAC/C,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;oCAAE;YACR,uFAAuF;YACvF,IAAI,eAAe;gBACjB;YACF;YAEA,kFAAkF;YAClF,IAAI,CAAC,iBAAiB,CAAC,eAAe;gBACpC,OAAO,IAAI,CAAC,oBAAoB,6DAA6D;YAC/F;QACF;mCAAG;QAAC;QAAe;QAAe;KAAO;IAEzC,sHAAsH;IACtH,gEAAgE;IAChE,IAAI,iBAAiB,CAAC,eAAe;QACnC,qBAAO,6LAAC;YAAI,WAAU;sBAAgC,cAAA,6LAAC;0BAAE;;;;;;;;;;;IACzD,wEAAwE;IAC1E;IAEA,kDAAkD;IAClD,qBAAO;kBAAG;;AACZ;GAzBwB;;QACmB,kIAAA,CAAA,UAAO;QACjC,qIAAA,CAAA,YAAS;;;KAFF"}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 115, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Nova%20pasta/TCC-1-Avaliacao-de-Sistemas/frontend/src/components/dashboard/StatCard.tsx"],"sourcesContent":["// frontend/src/components/dashboard/StatCard.tsx\r\n'use client';\r\nimport { LucideIcon } from 'lucide-react';\r\n\r\ninterface StatCardProps {\r\n  title: string;\r\n  value: string | number;\r\n  icon: LucideIcon;\r\n  color: string;\r\n  bgColor: string;\r\n}\r\n\r\nexport const StatCard = ({ title, value, icon: Icon, color, bgColor }: StatCardProps) => {\r\n  return (\r\n    <div className=\"bg-element-bg p-5 rounded-xl shadow-md border border-main-border transition-shadow duration-200\">\r\n      <div className=\"flex items-start justify-between\">\r\n        <div className={`p-2 rounded-lg ${bgColor}`}>\r\n          <Icon size={24} className={color} strokeWidth={1.5} />\r\n        </div>\r\n      </div>\r\n      <div className=\"mt-3\">\r\n        <h3 className=\"text-xl md:text-2xl font-semibold text-text-base\">{value}</h3>\r\n        <p className=\"text-sm text-text-muted mt-1 truncate\">{title}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};"],"names":[],"mappings":"AAAA,iDAAiD;;;;;AACjD;;AAWO,MAAM,WAAW,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,IAAI,EAAE,KAAK,EAAE,OAAO,EAAiB;IAClF,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAW,CAAC,eAAe,EAAE,SAAS;8BACzC,cAAA,6LAAC;wBAAK,MAAM;wBAAI,WAAW;wBAAO,aAAa;;;;;;;;;;;;;;;;0BAGnD,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAoD;;;;;;kCAClE,6LAAC;wBAAE,WAAU;kCAAyC;;;;;;;;;;;;;;;;;;AAI9D;KAda"}},
    {"offset": {"line": 187, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 193, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Nova%20pasta/TCC-1-Avaliacao-de-Sistemas/frontend/src/components/dashboard/QuestionResponseChart.tsx"],"sourcesContent":["// frontend/src/components/dashboard/QuestionResponseChart.tsx\r\n'use client';\r\n\r\nimport { BarChart, Bar, XAxis, YAxis, Tooltip, Legend, ResponsiveContainer } from 'recharts';\r\n\r\ninterface ChartData {\r\n  name: string;\r\n  count: number;\r\n}\r\n\r\ninterface QuestionResponseChartProps {\r\n  title: string;\r\n  data: ChartData[];\r\n}\r\n\r\nexport function QuestionResponseChart({ title, data }: QuestionResponseChartProps) {\r\n  return (\r\n    <div className=\"bg-card-background dark:bg-gray-800 p-6 rounded-lg shadow border border-border\">\r\n      <h3 className=\"text-lg font-semibold text-foreground mb-4\">{title}</h3>\r\n      <div style={{ width: '100%', height: 300 }}>\r\n        <ResponsiveContainer>\r\n          <BarChart data={data} layout=\"vertical\" margin={{ top: 5, right: 30, left: 20, bottom: 5 }}>\r\n            <XAxis type=\"number\" />\r\n            <YAxis type=\"category\" dataKey=\"name\" width={150} />\r\n            <Tooltip\r\n              cursor={{ fill: 'rgba(var(--color-primary-rgb), 0.1)' }}\r\n              contentStyle={{\r\n                background: 'hsl(var(--background))',\r\n                borderColor: 'hsl(var(--border))',\r\n              }}\r\n            />\r\n            <Legend />\r\n            <Bar dataKey=\"count\" name=\"Respostas\" fill=\"hsl(var(--primary))\" />\r\n          </BarChart>\r\n        </ResponsiveContainer>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,8DAA8D;;;;;AAG9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;;;AAcO,SAAS,sBAAsB,EAAE,KAAK,EAAE,IAAI,EAA8B;IAC/E,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA8C;;;;;;0BAC5D,6LAAC;gBAAI,OAAO;oBAAE,OAAO;oBAAQ,QAAQ;gBAAI;0BACvC,cAAA,6LAAC,sKAAA,CAAA,sBAAmB;8BAClB,cAAA,6LAAC,uJAAA,CAAA,WAAQ;wBAAC,MAAM;wBAAM,QAAO;wBAAW,QAAQ;4BAAE,KAAK;4BAAG,OAAO;4BAAI,MAAM;4BAAI,QAAQ;wBAAE;;0CACvF,6LAAC,wJAAA,CAAA,QAAK;gCAAC,MAAK;;;;;;0CACZ,6LAAC,wJAAA,CAAA,QAAK;gCAAC,MAAK;gCAAW,SAAQ;gCAAO,OAAO;;;;;;0CAC7C,6LAAC,0JAAA,CAAA,UAAO;gCACN,QAAQ;oCAAE,MAAM;gCAAsC;gCACtD,cAAc;oCACZ,YAAY;oCACZ,aAAa;gCACf;;;;;;0CAEF,6LAAC,yJAAA,CAAA,SAAM;;;;;0CACP,6LAAC,sJAAA,CAAA,MAAG;gCAAC,SAAQ;gCAAQ,MAAK;gCAAY,MAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMvD;KAvBgB"}},
    {"offset": {"line": 308, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 314, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Nova%20pasta/TCC-1-Avaliacao-de-Sistemas/frontend/src/app/dashboard/page.tsx"],"sourcesContent":["// frontend/src/app/dashboard/page.tsx\r\n'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport api from '@/services/api';\r\nimport AdminAuthGuard from '@/components/auth/AdminAuthGuard';\r\nimport { StatCard } from '@/components/dashboard/StatCard';\r\nimport { QuestionResponseChart } from '@/components/dashboard/QuestionResponseChart';\r\nimport { FileText, ClipboardList, Users } from 'lucide-react';\r\n\r\n// Tipagem para os dados que virão da API\r\ninterface DashboardStats {\r\n  geral: {\r\n    totalQuestionarios: number;\r\n    totalAvaliacoes: number;\r\n    totalRespostasCompletas: number;\r\n  };\r\n  respostasAgregadas: {\r\n    perguntaId: number;\r\n    enunciado: string;\r\n    dados: { name: string; count: number }[];\r\n  }[];\r\n}\r\n\r\nfunction DashboardPageContent() {\r\n  const [stats, setStats] = useState<DashboardStats | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    async function fetchStats() {\r\n      try {\r\n        setLoading(true);\r\n        const response = await api.get<DashboardStats>('/dashboard/stats');\r\n        setStats(response.data);\r\n      } catch (err) {\r\n        setError('Não foi possível carregar os dados do dashboard.');\r\n        console.error(err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    fetchStats();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return <div className=\"text-center py-20\">Carregando dashboard...</div>;\r\n  }\r\n\r\n  if (error || !stats) {\r\n    return <div className=\"text-center py-20 text-red-500\">{error || 'Dados não encontrados.'}</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"page-container p-4 sm:p-6\">\r\n      <h1 className=\"text-2xl sm:text-3xl font-bold text-foreground mb-8\">Dashboard Geral</h1>\r\n\r\n      {/* Seção de Estatísticas Gerais */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-10\">\r\n        <StatCard title=\"Total de Questionários\" value={stats.geral.totalQuestionarios} Icon={FileText} />\r\n        <StatCard title=\"Total de Avaliações\" value={stats.geral.totalAvaliacoes} Icon={ClipboardList} />\r\n        <StatCard title=\"Respostas Finalizadas\" value={stats.geral.totalRespostasCompletas} Icon={Users} />\r\n      </div>\r\n\r\n      {/* Seção de Gráficos */}\r\n      <h2 className=\"text-xl sm:text-2xl font-bold text-foreground mb-6\">Distribuição de Respostas</h2>\r\n      \r\n      {stats.respostasAgregadas.length === 0 ? (\r\n        <div className=\"text-center py-10 px-4 bg-card-background dark:bg-gray-800 rounded-lg shadow border border-border\">\r\n          <p className=\"text-text-muted\">Nenhuma resposta para perguntas de múltipla escolha ou escala foi encontrada para gerar gráficos.</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-8\">\r\n          {stats.respostasAgregadas.map((item) => (\r\n            <QuestionResponseChart\r\n              key={item.perguntaId}\r\n              title={item.enunciado}\r\n              data={item.dados}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function DashboardPage() {\r\n  return (\r\n    <AdminAuthGuard>\r\n      <DashboardPageContent />\r\n    </AdminAuthGuard>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,sCAAsC;;;;;AAGtC;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;AAPA;;;;;;;AAuBA,SAAS;;IACP,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAyB;IAC1D,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAElD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;0CAAE;YACR,eAAe;gBACb,IAAI;oBACF,WAAW;oBACX,MAAM,WAAW,MAAM,yHAAA,CAAA,UAAG,CAAC,GAAG,CAAiB;oBAC/C,SAAS,SAAS,IAAI;gBACxB,EAAE,OAAO,KAAK;oBACZ,SAAS;oBACT,QAAQ,KAAK,CAAC;gBAChB,SAAU;oBACR,WAAW;gBACb;YACF;YACA;QACF;yCAAG,EAAE;IAEL,IAAI,SAAS;QACX,qBAAO,6LAAC;YAAI,WAAU;sBAAoB;;;;;;IAC5C;IAEA,IAAI,SAAS,CAAC,OAAO;QACnB,qBAAO,6LAAC;YAAI,WAAU;sBAAkC,SAAS;;;;;;IACnE;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAAsD;;;;;;0BAGpE,6LAAC;gBAAI,WAAU;;kCACb,6LAAC,8IAAA,CAAA,WAAQ;wBAAC,OAAM;wBAAyB,OAAO,MAAM,KAAK,CAAC,kBAAkB;wBAAE,MAAM,iNAAA,CAAA,WAAQ;;;;;;kCAC9F,6LAAC,8IAAA,CAAA,WAAQ;wBAAC,OAAM;wBAAsB,OAAO,MAAM,KAAK,CAAC,eAAe;wBAAE,MAAM,2NAAA,CAAA,gBAAa;;;;;;kCAC7F,6LAAC,8IAAA,CAAA,WAAQ;wBAAC,OAAM;wBAAwB,OAAO,MAAM,KAAK,CAAC,uBAAuB;wBAAE,MAAM,uMAAA,CAAA,QAAK;;;;;;;;;;;;0BAIjG,6LAAC;gBAAG,WAAU;0BAAqD;;;;;;YAElE,MAAM,kBAAkB,CAAC,MAAM,KAAK,kBACnC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAE,WAAU;8BAAkB;;;;;;;;;;qCAGjC,6LAAC;gBAAI,WAAU;0BACZ,MAAM,kBAAkB,CAAC,GAAG,CAAC,CAAC,qBAC7B,6LAAC,2JAAA,CAAA,wBAAqB;wBAEpB,OAAO,KAAK,SAAS;wBACrB,MAAM,KAAK,KAAK;uBAFX,KAAK,UAAU;;;;;;;;;;;;;;;;AASlC;GA5DS;KAAA;AA8DM,SAAS;IACtB,qBACE,6LAAC,+IAAA,CAAA,UAAc;kBACb,cAAA,6LAAC;;;;;;;;;;AAGP;MANwB"}},
    {"offset": {"line": 491, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}